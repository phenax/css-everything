<html lang="en">
  <head>
    <title>Task destroyer</title>
    <meta charset="UTF-8" />
    <style>
      body {
        --cssx-children: form#task-input-form #task-list;
      }

      #task-input-form {
        /* prettier-ignore */
        --cssx-on-submit:
          prevent-default()
          add-children(
            task-list,
            instance(div#task-item, map(--text: attr(text-input, 'value')))
          );

        /* prettier-ignore */
        --cssx-children:
          input#text-input[data-testid=add-task-input]
          button#create-task-btn[type=submit][data-testid=add-task-btn]
        ;
      }

      #text-input {
      }
      #create-task-btn {
        --cssx-text: 'Submit';
      }

      [data-instance='task-item'] {
        --text: default text;
        --checked: false;

        --cssx-on-mount: set-attr('data-testid', attr(id));
        --cssx-on-click: update(--checked, if(var(--checked), false, true));
      }
      [data-instance='task-item']::after {
        content: var(--text);
      }
    </style>
  </head>
  <body></body>
</html>
